########################################
# YAZI — Main Configuration File (TOML)
# Pure terminal workflow - no GUI dependencies
########################################

###########
# Manager #
###########
[mgr]
show_hidden = true         # Show dotfiles
show_symlink = true        # Highlight symlinks  
scrolloff = 5              # Keep 5 lines context when scrolling
sort_by = "natural"        # Natural sorting (1, 2, 10 not 1, 10, 2)
sort_dir_first = true      # Directories first
linemode = "size"          # Show file sizes
ratio = [1, 4, 3]          # Sidebar | Main | Preview widths

############
# Preview  #
############
[preview]
wrap = "yes"               # Wrap long lines in preview
tab_size = 4               # Tab width
max_width = 1000           # Max preview width
max_height = 2000          # Max preview height
cache_dir = ""             # Use default cache location

###########
# Opener  #
###########
[opener]
# Text/Code → Neovim (TUI)
edit = [
  { run = 'nvim "$@"', block = true, orphan = false, desc = "Edit in Neovim" }
]

# Images → imv (minimal GUI, but necessary for images)
image = [
  { run = 'imv "$@"', block = false, orphan = true, desc = "View image" }
]

# PDFs → Zathura (minimal, keyboard-driven)
pdf = [
  { run = 'zathura "$@"', block = false, orphan = true, desc = "Open PDF" }
]

# Archives → Extract in terminal
extract = [
  { run = 'aunpack "$@"', block = true, orphan = false, desc = "Extract archive" }
]

# Archive peek → List contents without extracting
peek = [
  { run = 'als "$@" | less', block = true, orphan = false, desc = "View archive contents" }
]

# Videos → mpv (minimal, terminal-like)
video = [
  { run = 'mpv "$@"', block = false, orphan = true, desc = "Play video" }
]

# Diff tool → Meld (for your SUPER ALT+cm keybind)
diff = [
  { run = 'meld "$@"', block = false, orphan = true, desc = "Compare in Meld" }
]

# Fallback (rare use)
fallback = [
  { run = 'xdg-open "$@"', block = false, orphan = true, desc = "Open with default app" }
]

###########
# Open    #
###########
[open]
rules = [
  # Text files → Neovim
  { mime = "text/*", use = "edit" },
  { mime = "application/json", use = "edit" },
  { mime = "application/x-sh", use = "edit" },
  { mime = "application/toml", use = "edit" },
  { mime = "application/yaml", use = "edit" },
  
  # Images → imv
  { mime = "image/*", use = "image" },
  
  # PDFs → Zathura
  { mime = "application/pdf", use = "pdf" },
  
  # Archives → Extract (Enter key)
  { mime = "application/*zip", use = "extract" },
  { mime = "application/x-tar", use = "extract" },
  { mime = "application/x-bzip*", use = "extract" },
  { mime = "application/x-7z-compressed", use = "extract" },
  { mime = "application/x-rar", use = "extract" },
  { mime = "application/gzip", use = "extract" },
  { mime = "application/x-xz", use = "extract" },
  
  # Videos → mpv
  { mime = "video/*", use = "video" },
  { mime = "audio/*", use = "video" },  # mpv plays audio too
  
  # Everything else
  { mime = "*", use = "fallback" },
]

###############
# Input       #
###############
[input]
cursor_blink = false       # Solid cursor (easier to see)

##########
# Log    #
##########
[log]
enabled = false            # Disable logging (performance)
